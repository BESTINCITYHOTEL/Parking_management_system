<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ì£¼ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    .top-buttons {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .top-buttons button {
      font-size: 22px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .parking-container {
      position: relative;
      width: 100%;
      max-width: 900px;
      height: 600px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      grid-template-rows: repeat(18, 1fr);
      gap: 5px;
      background: url('ë„ë©´ì´ë¯¸ì§€.png') no-repeat center center;
      background-size: cover;
    }

    .spot {
      width: 100%;
      height: 100%;
      aspect-ratio: 2 / 1;
      background-color: green;
      color: white;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      font-weight: bold;
      border-radius: 10px;
      cursor: pointer;
      line-height: 1.2;
      padding: 5px;
      text-shadow: 1px 1px 3px black;
      box-sizing: border-box;
      white-space: nowrap;
      position: relative;
    }

    .occupied {
      background-color: red;
    }

    .empty {
      background: none;
      pointer-events: none;
      border: 1px solid transparent;
    }

    .edit-mode .empty {
      background-color: #444;
      pointer-events: auto;
    }

    .edit-mode .empty::before {
      content: '+';
      color: white;
      font-size: 20px;
    }

    .edit-mode .spot.active:not(.occupied)::after {
      content: '-';
      position: absolute;
      top: 3px;
      right: 6px;
      font-size: 16px;
      color: white;
    }

    .border-top {
      border-top: 3px solid black;
    }

    .border-bottom {
      border-bottom: 3px solid black;
    }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 30px;
      border-radius: 10px;
      z-index: 1000;
      width: 90%;
      max-width: 450px;
      box-sizing: border-box;
    }

    .modal input {
      width: 100%;
      padding: 15px;
      margin: 5px 0;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      box-sizing: border-box;
    }

    .modal-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
    }

    .modal-buttons button {
      flex: 1;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      color: white;
      box-sizing: border-box;
    }

    .modal-buttons .remove {
      background-color: orange;
    }

    .modal-buttons .cancel {
      background-color: red;
    }

    .modal-buttons #submitBtn {
      background-color: green;
    }

    @media (max-width: 600px) {
      .parking-container {
        height: 400px;
      }

      .spot {
        font-size: 10px;
        padding: 3px;
      }

      .modal {
        width: 95%;
        padding: 20px;
      }

      .modal input {
        padding: 12px;
        font-size: 14px;
      }

      .modal-buttons button {
        padding: 10px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <h2>ì£¼ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
  <div class="top-buttons">
    <button id="clearAllBtn">ğŸ§¹</button>
    <button id="editModeBtn">ğŸš—</button>
    <button id="resetToDefaultBtn" style="display:none">ğŸ”„</button>
    <button id="uploadDataBtn">ğŸ“¤</button>
  </div>
  <p id="status">í˜„ì¬ ì£¼ì°¨ëœ ì°¨ëŸ‰: 0ëŒ€ / ë‚¨ì€ ìë¦¬: 39ëŒ€</p>

  <div class="parking-container" id="parkingLot"></div>

  <div id="modal" class="modal">
    <h3>ì£¼ì°¨ ì •ë³´ ìˆ˜ì •</h3>
    <input type="text" id="room" placeholder="ì…ì‹¤ í˜¸ìˆ˜" inputmode="numeric" />
    <input type="text" id="car" placeholder="ì°¨ëŸ‰ ë’·ë²ˆí˜¸" inputmode="numeric" />
    <div class="modal-buttons">
      <button class="remove" id="removeBtn">ì¶œì°¨</button>
      <button id="submitBtn">ì €ì¥</button>
      <button class="cancel" id="cancelBtn">ì·¨ì†Œ</button>
    </div>
  </div>

  <script>
    const TOTAL_SPOTS = 108;
    const VALID_ROOMS = new Set(
      Array.from({ length: 14 }, (_, i) => i + 1).flatMap((num) => [
        `201${num}`,
        `301${num}`,
        `501${num}`,
        `601${num}`,
        `701${num}`,
      ])
    );

    let parkingRecords = JSON.parse(localStorage.getItem("parkingRecords") || "{}");
    let activeSpots = JSON.parse(localStorage.getItem("activeSpots") || JSON.stringify(DEFAULT_ACTIVE_SPOTS));
    let isEditMode = false;
    let modalOpen = false;
    let currentSlot = null;

ì½”ë“œê°€ ê¸¸ì–´ì„œ ë‚˜ëˆ ì„œ ì œê³µí•˜ê² ìŠµë‹ˆë‹¤. ë‹¤ìŒ ë¶€ë¶„ì€ JavaScript ì½”ë“œì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ìœ¼ë¡œ ì°¨ëŸ‰ ì •ë³´ ìë™ ë§¤ì¹­ ì‹œìŠ¤í…œì´ í¬í•¨ëœ êµ¬í˜„ì…ë‹ˆë‹¤.

```html name=parking_management_system.html continued
    function updateStatus() {
      const occupiedCount = Object.keys(parkingRecords).length;
      const availableCount = activeSpots.length - occupiedCount;
      document.getElementById("status").innerText = `í˜„ì¬ ì£¼ì°¨ëœ ì°¨ëŸ‰: ${occupiedCount}ëŒ€ / ë‚¨ì€ ìë¦¬: ${availableCount}ëŒ€`;
    }

    function showModal(slot) {
      modalOpen = true;
      currentSlot = slot;
      const modal = document.getElementById("modal");
      modal.style.display = "block";

      const roomInput = document.getElementById("room");
      const carInput = document.getElementById("car");
      roomInput.value = parkingRecords[slot]?.room || "";
      carInput.value = parkingRecords[slot]?.car || "";

      document.getElementById("submitBtn").onclick = () => {
        const room = roomInput.value;
        const car = carInput.value;
        parkingRecords[slot] = { room, car };
        const spotElement = document.getElementById(`spot-${slot}`);
        spotElement.classList.add("occupied");
        spotElement.innerText = `${room || "-"}\n${car || "-"}`;
        updateStatus();
        localStorage.setItem("parkingRecords", JSON.stringify(parkingRecords));
        modal.style.display = "none";
        modalOpen = false;
      };

      document.getElementById("removeBtn").onclick = () => {
        delete parkingRecords[slot];
        const spotElement = document.getElementById(`spot-${slot}`);
        spotElement.classList.remove("occupied");
        spotElement.innerText = "";
        updateStatus();
        localStorage.setItem("parkingRecords", JSON.stringify(parkingRecords));
        modal.style.display = "none";
        modalOpen = false;
      };

      document.getElementById("cancelBtn").onclick = () => {
        modal.style.display = "none";
        modalOpen = false;
      };
    }

    function toggleEditMode() {
      isEditMode = !isEditMode;
      document.getElementById("resetToDefaultBtn").style.display = isEditMode ? "inline-block" : "none";
      document.getElementById("parkingLot").classList.toggle("edit-mode", isEditMode);
    }

    function resetToDefaultSpots() {
      activeSpots = [...DEFAULT_ACTIVE_SPOTS];
      parkingRecords = {};
      localStorage.setItem("activeSpots", JSON.stringify(activeSpots));
      localStorage.setItem("parkingRecords", JSON.stringify(parkingRecords));
      createParkingLot();
    }

    function toggleParking(slot) {
      if (modalOpen) return;
      if (isEditMode) {
        const index = activeSpots.indexOf(slot);
        if (index === -1) {
          activeSpots.push(slot);
        } else {
          activeSpots.splice(index, 1);
          delete parkingRecords[slot];
        }
        localStorage.setItem("activeSpots", JSON.stringify(activeSpots));
        localStorage.setItem("parkingRecords", JSON.stringify(parkingRecords));
        createParkingLot();
      } else {
        if (activeSpots.includes(slot)) {
          showModal(slot);
        }
      }
    }

    function applyUploadedData(inputData) {
      const warnings = [];
      const parsedData = inputData.split("\n").map((line, index) => {
        const tokens = line.split("\t");
        const roomMatch = tokens.find((t) => VALID_ROOMS.has(t.trim()));
        const carMatch = tokens.find((t) => t.includes("ì°¨ëŸ‰:"));
        const room = roomMatch ? roomMatch.trim() : null;
        const car = carMatch ? carMatch.replace("ì°¨ëŸ‰:", "").trim() : null;

        if (!room || !car) {
          warnings.push(`[ì…ë ¥ëœ ì •ë³´] ${index + 1}ë²ˆì§¸ ì¤„ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.`);
          return null;
        }

        if (!VALID_ROOMS.has(room)) {
          warnings.push(`[ì…ë ¥ëœ ì •ë³´] ${room}í˜¸ëŠ” ìœ íš¨í•˜ì§€ ì•Šì€ ê°ì‹¤ì…ë‹ˆë‹¤.`);
          return null;
        }

        return { room, car };
      });

      parsedData.forEach((entry) => {
        if (!entry) return;

        const { room, car } = entry;

        if (car in parkingRecords && parkingRecords[car] !== room) {
          warnings.push(
            `[ì…ë ¥ëœ ì •ë³´] ì°¨ëŸ‰ ë²ˆí˜¸ ${car}ëŠ” ì‹œìŠ¤í…œì˜ ì…ì‹¤ í˜¸ìˆ˜ì™€ ë¶ˆì¼ì¹˜í•©ë‹ˆë‹¤. ìˆ˜ë™ í™•ì¸ ë°”ëë‹ˆë‹¤.`
          );
        } else {
          parkingRecords[car] = room;
        }
      });

      if (warnings.length > 0) {
        alert(warnings.join("\n"));
      }

      createParkingLot();
    }

    function createParkingLot() {
      const lot = document.getElementById("parkingLot");
      lot.innerHTML = "";

      for (let i = 1; i <= TOTAL_SPOTS; i++) {
        const spot = document.createElement("div");
        spot.classList.add("spot");

        if (!activeSpots.includes(i)) {
          spot.classList.add("empty");
        } else {
          spot.classList.add("active");
          spot.id = `spot-${i}`;
          if (parkingRecords[i]) {
            spot.classList.add("occupied");
            spot.innerText = `${parkingRecords[i].room || "-"}\n${parkingRecords[i].car || "-"}`;
          }
        }

        spot.onclick = () => toggleParking(i);
        lot.appendChild(spot);
      }
      updateStatus();
    }

    document.getElementById("editModeBtn").onclick = toggleEditMode;
    document.getElementById("resetToDefaultBtn").onclick = resetToDefaultSpots;
    document.getElementById("clearAllBtn").onclick = () => {
      parkingRecords = {};
      localStorage.setItem("parkingRecords", JSON.stringify(parkingRecords));
      createParkingLot();
    };

    document.getElementById("uploadDataBtn").onclick = () => {
      const inputData = prompt("ì°¨ëŸ‰ ì •ë³´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:");
      if (inputData) {
        applyUploadedData(inputData);
      }
    };

    createParkingLot();
  </script>
</body>
</html>
```

---

### ì£¼ìš” ë³€ê²½ ë‚´ìš©
1. **ë°ì´í„° ì—…ë¡œë“œ ë²„íŠ¼ ì¶”ê°€**:
   - ğŸ“¤ ë²„íŠ¼ì„ í†µí•´ ì°¨ëŸ‰ ì •ë³´ë¥¼ ì…ë ¥ë°›ì•„ ì‹œìŠ¤í…œì— ì ìš©í•©ë‹ˆë‹¤.

2. **ê²½ê³  ë©”ì‹œì§€ ì¶œë ¥**:
   - ë°ì´í„° ì…ë ¥ ì¤‘ ë°œìƒ ê°€ëŠ¥í•œ ë¬¸ì œë¥¼ ê²½ê³  ë©”ì‹œì§€ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.

3. **ìë™ ë§¤ì¹­**:
   - ì…ë ¥ëœ ë°ì´í„°ì™€ ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ ë¹„êµí•˜ì—¬ ì°¨ëŸ‰ ë²ˆí˜¸ì™€ ì…ì‹¤ í˜¸ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ë§¤ì¹­í•©ë‹ˆë‹¤.

ì´ ì½”ë“œë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•˜ë©´ ì£¼ì°¨ ì‹œìŠ¤í…œê³¼ ì°¨ëŸ‰ ì •ë³´ ìë™ ë§¤ì¹­ ì‹œìŠ¤í…œì´ í•¨ê»˜ ë™ì‘í•©ë‹ˆë‹¤. ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ˜Š
